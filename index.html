<html><head><meta content="text/html; charset=UTF-8" http-equiv="content-type"><style type="text/css">.lst-kix_gbujtuk4z6x9-3>li:before{content:"" counter(lst-ctn-kix_gbujtuk4z6x9-0,decimal) "." counter(lst-ctn-kix_gbujtuk4z6x9-1,decimal) "." counter(lst-ctn-kix_gbujtuk4z6x9-2,decimal) "." counter(lst-ctn-kix_gbujtuk4z6x9-3,decimal) ". "}ol.lst-kix_gbujtuk4z6x9-5{list-style-type:none}ol.lst-kix_gbujtuk4z6x9-4{list-style-type:none}ol.lst-kix_gbujtuk4z6x9-7{list-style-type:none}ol.lst-kix_gbujtuk4z6x9-6{list-style-type:none}ol.lst-kix_gbujtuk4z6x9-1{list-style-type:none}ol.lst-kix_gbujtuk4z6x9-0{list-style-type:none}.lst-kix_gbujtuk4z6x9-0>li:before{content:"" counter(lst-ctn-kix_gbujtuk4z6x9-0,decimal) ". "}ol.lst-kix_gbujtuk4z6x9-3{list-style-type:none}.lst-kix_gbujtuk4z6x9-4>li:before{content:"" counter(lst-ctn-kix_gbujtuk4z6x9-0,decimal) "." counter(lst-ctn-kix_gbujtuk4z6x9-1,decimal) "." counter(lst-ctn-kix_gbujtuk4z6x9-2,decimal) "." counter(lst-ctn-kix_gbujtuk4z6x9-3,decimal) "." counter(lst-ctn-kix_gbujtuk4z6x9-4,decimal) ". "}ol.lst-kix_gbujtuk4z6x9-2{list-style-type:none}ol.lst-kix_gbujtuk4z6x9-6.start{counter-reset:lst-ctn-kix_gbujtuk4z6x9-6 0}ol.lst-kix_gbujtuk4z6x9-4.start{counter-reset:lst-ctn-kix_gbujtuk4z6x9-4 0}ol.lst-kix_gbujtuk4z6x9-1.start{counter-reset:lst-ctn-kix_gbujtuk4z6x9-1 0}.lst-kix_gbujtuk4z6x9-1>li{counter-increment:lst-ctn-kix_gbujtuk4z6x9-1}.lst-kix_gbujtuk4z6x9-3>li{counter-increment:lst-ctn-kix_gbujtuk4z6x9-3}.lst-kix_gbujtuk4z6x9-1>li:before{content:"" counter(lst-ctn-kix_gbujtuk4z6x9-0,decimal) "." counter(lst-ctn-kix_gbujtuk4z6x9-1,decimal) ". "}ol.lst-kix_gbujtuk4z6x9-8{list-style-type:none}.lst-kix_gbujtuk4z6x9-2>li:before{content:"" counter(lst-ctn-kix_gbujtuk4z6x9-0,decimal) "." counter(lst-ctn-kix_gbujtuk4z6x9-1,decimal) "." counter(lst-ctn-kix_gbujtuk4z6x9-2,decimal) ". "}.lst-kix_gbujtuk4z6x9-6>li{counter-increment:lst-ctn-kix_gbujtuk4z6x9-6}ol.lst-kix_gbujtuk4z6x9-8.start{counter-reset:lst-ctn-kix_gbujtuk4z6x9-8 0}.lst-kix_gbujtuk4z6x9-4>li{counter-increment:lst-ctn-kix_gbujtuk4z6x9-4}.lst-kix_gbujtuk4z6x9-8>li:before{content:"" counter(lst-ctn-kix_gbujtuk4z6x9-0,decimal) "." counter(lst-ctn-kix_gbujtuk4z6x9-1,decimal) "." counter(lst-ctn-kix_gbujtuk4z6x9-2,decimal) "." counter(lst-ctn-kix_gbujtuk4z6x9-3,decimal) "." counter(lst-ctn-kix_gbujtuk4z6x9-4,decimal) "." counter(lst-ctn-kix_gbujtuk4z6x9-5,decimal) "." counter(lst-ctn-kix_gbujtuk4z6x9-6,decimal) "." counter(lst-ctn-kix_gbujtuk4z6x9-7,decimal) "." counter(lst-ctn-kix_gbujtuk4z6x9-8,decimal) ". "}.lst-kix_gbujtuk4z6x9-0>li{counter-increment:lst-ctn-kix_gbujtuk4z6x9-0}.lst-kix_gbujtuk4z6x9-7>li:before{content:"" counter(lst-ctn-kix_gbujtuk4z6x9-0,decimal) "." counter(lst-ctn-kix_gbujtuk4z6x9-1,decimal) "." counter(lst-ctn-kix_gbujtuk4z6x9-2,decimal) "." counter(lst-ctn-kix_gbujtuk4z6x9-3,decimal) "." counter(lst-ctn-kix_gbujtuk4z6x9-4,decimal) "." counter(lst-ctn-kix_gbujtuk4z6x9-5,decimal) "." counter(lst-ctn-kix_gbujtuk4z6x9-6,decimal) "." counter(lst-ctn-kix_gbujtuk4z6x9-7,decimal) ". "}.lst-kix_gbujtuk4z6x9-5>li:before{content:"" counter(lst-ctn-kix_gbujtuk4z6x9-0,decimal) "." counter(lst-ctn-kix_gbujtuk4z6x9-1,decimal) "." counter(lst-ctn-kix_gbujtuk4z6x9-2,decimal) "." counter(lst-ctn-kix_gbujtuk4z6x9-3,decimal) "." counter(lst-ctn-kix_gbujtuk4z6x9-4,decimal) "." counter(lst-ctn-kix_gbujtuk4z6x9-5,decimal) ". "}.lst-kix_gbujtuk4z6x9-7>li{counter-increment:lst-ctn-kix_gbujtuk4z6x9-7}ol.lst-kix_gbujtuk4z6x9-3.start{counter-reset:lst-ctn-kix_gbujtuk4z6x9-3 0}.lst-kix_gbujtuk4z6x9-6>li:before{content:"" counter(lst-ctn-kix_gbujtuk4z6x9-0,decimal) "." counter(lst-ctn-kix_gbujtuk4z6x9-1,decimal) "." counter(lst-ctn-kix_gbujtuk4z6x9-2,decimal) "." counter(lst-ctn-kix_gbujtuk4z6x9-3,decimal) "." counter(lst-ctn-kix_gbujtuk4z6x9-4,decimal) "." counter(lst-ctn-kix_gbujtuk4z6x9-5,decimal) "." counter(lst-ctn-kix_gbujtuk4z6x9-6,decimal) ". "}.lst-kix_gbujtuk4z6x9-5>li{counter-increment:lst-ctn-kix_gbujtuk4z6x9-5}ol.lst-kix_gbujtuk4z6x9-0.start{counter-reset:lst-ctn-kix_gbujtuk4z6x9-0 0}.lst-kix_gbujtuk4z6x9-8>li{counter-increment:lst-ctn-kix_gbujtuk4z6x9-8}ol.lst-kix_gbujtuk4z6x9-5.start{counter-reset:lst-ctn-kix_gbujtuk4z6x9-5 0}ol.lst-kix_gbujtuk4z6x9-2.start{counter-reset:lst-ctn-kix_gbujtuk4z6x9-2 0}ol.lst-kix_gbujtuk4z6x9-7.start{counter-reset:lst-ctn-kix_gbujtuk4z6x9-7 0}.lst-kix_gbujtuk4z6x9-2>li{counter-increment:lst-ctn-kix_gbujtuk4z6x9-2}ol{margin:0;padding:0}table td,table th{padding:0}.c10{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:10pt;font-family:"Arial";font-style:normal}.c4{color:#000000;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:11pt;font-family:"Arial";font-style:normal}.c30{color:#666666;font-weight:400;text-decoration:none;vertical-align:baseline;font-size:12pt;font-family:"Arial";font-style:normal}.c8{color:#000000;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:23pt;font-family:"Arial";font-style:normal}.c14{color:#000000;font-weight:700;text-decoration:none;vertical-align:baseline;font-size:13pt;font-family:"Arial";font-style:normal}.c35{padding-top:0pt;padding-bottom:4pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c3{padding-top:0pt;padding-bottom:0pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c22{color:#000000;font-weight:700;text-decoration:none;vertical-align:baseline;font-family:"Arial";font-style:normal}.c34{padding-top:10pt;padding-bottom:2pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c23{padding-top:24pt;padding-bottom:6pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c12{padding-top:11pt;padding-bottom:2pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c17{padding-top:0pt;padding-bottom:0pt;line-height:1.0;orphans:2;widows:2;text-align:left}.c19{padding-top:12pt;padding-bottom:2pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c9{padding-top:18pt;padding-bottom:4pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c1{padding-top:14pt;padding-bottom:4pt;line-height:1.15;orphans:2;widows:2;text-align:left}.c7{text-decoration-skip-ink:none;font-size:10pt;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline}.c5{color:#000000;text-decoration:none;vertical-align:baseline;font-size:11pt;font-style:normal}.c18{text-decoration-skip-ink:none;-webkit-text-decoration-skip:none;color:#1155cc;text-decoration:underline}.c31{padding-top:0pt;padding-bottom:0pt;line-height:1.0;text-align:left}.c24{vertical-align:baseline;font-size:11pt;font-style:normal}.c32{background-color:#ffffff;max-width:451.4pt;padding:72pt 72pt 72pt 72pt}.c16{font-size:13pt;color:#000000;font-weight:700}.c21{font-weight:700;font-family:"Courier New"}.c15{color:inherit;text-decoration:inherit}.c27{width:33%;height:1px}.c20{border:1px solid black;margin:5px}.c6{color:#000000;font-size:11pt}.c0{font-weight:400;font-family:"Courier New"}.c33{font-size:9pt}.c25{font-size:17pt}.c13{height:11pt}.c28{font-style:italic}.c26{font-weight:700}.c2{page-break-after:avoid}.c11{font-size:10pt}.c29{font-size:11pt}.title{padding-top:0pt;color:#000000;font-size:26pt;padding-bottom:3pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}.subtitle{padding-top:0pt;color:#666666;font-size:15pt;padding-bottom:16pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}li{color:#000000;font-size:11pt;font-family:"Arial"}p{margin:0;color:#000000;font-size:11pt;font-family:"Arial"}h1{padding-top:20pt;color:#000000;font-size:20pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h2{padding-top:18pt;color:#000000;font-size:16pt;padding-bottom:6pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h3{padding-top:16pt;color:#434343;font-size:14pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h4{padding-top:14pt;color:#666666;font-size:12pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h5{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;orphans:2;widows:2;text-align:left}h6{padding-top:12pt;color:#666666;font-size:11pt;padding-bottom:4pt;font-family:"Arial";line-height:1.15;page-break-after:avoid;font-style:italic;orphans:2;widows:2;text-align:left}</style></head><body class="c32"><h1 class="c23" id="h.jljays8xjan2"><span class="c8">1 Up2U Components</span></h1><p class="c35"><span>Up2U is a platform for digital learning supporting innovative pedagogy and creative use of diverse integrated tools for both formal and informal learning</span><sup><a href="#ftnt1" id="ftnt_ref1">[1]</a></sup><span>.</span></p><h2 class="c9" id="h.7xf592s9ivoo"><span class="c22 c25">1.1 LMS</span></h2><p class="c3"><span>A learning management system aggregates and provides an interface to formal and informal resources that a teacher and a student can use to implement customised learning.</span></p><h3 class="c1" id="h.4yfj7f1lplfe"><span class="c14">1.1.1 Moodle</span></h3><p class="c3"><span>Moodle is a learning management system built on social constructivist theory</span><sup><a href="#ftnt2" id="ftnt_ref2">[2]</a></sup></p><h4 class="c19" id="h.r8i9hr289yd0"><span class="c22 c29">1.1.1.1 Reference implementation</span></h4><p class="c3"><span>The augmented version of Moodle currently used in the Up2U reference platform is on GitHub</span><sup><a href="#ftnt3" id="ftnt_ref3">[3]</a></sup></p><h5 class="c12" id="h.n5hixdg4akoe"><span class="c22 c11">1.1.1.1.1 Docker images (MySQL, Moodle), including Moodle plugins in Dockerfile</span></h5><p class="c3"><span>Up2U uses Docker</span><sup><a href="#ftnt4" id="ftnt_ref4">[4]</a></sup><span>, with images for Moodle and </span><span>My</span><span>SQL (the database used by Moodle). Both </span><span>images </span><span class="c4">have been augmented with scripts for easy headless configuration, and several tool integrations are built in the Dockerfile, including Moodle plugins and external tools.</span></p><p class="c3 c13"><span class="c4"></span></p><p class="c3"><span>Plugins enable the site administrator to add features (as new activities, new quiz question types, new reports, integrations, and more). There is a list of plugin types</span><sup><a href="#ftnt5" id="ftnt_ref5">[5]</a></sup><span class="c4">.</span></p><p class="c3 c13"><span class="c4"></span></p><p class="c3"><span class="c4">To enable easy and consistent deployment and configuration of Up2U, it is recommended that plugins and other integrations be added to an Up2U instance at build or deployment time. Descriptions of how to do this depend on the type of integration, and are given below, under &ldquo;Infrastructure Integrations&rdquo;. The configuration method, however, is generic, and is described here.</span></p><p class="c3 c13"><span class="c4"></span></p><p class="c3"><span>It is possible that an integration needs some configuration. Two key concepts in Moodle configuration are </span><span class="c28">configuration variables</span><span>&nbsp;and </span><span class="c28">capabilities</span><span>. The former contain values for settings for a Moodle module or plugin; the latter describe actions which a particular user or user role in Moodle is permitted to perform. </span><span class="c4">Configuration variables are identified by the relevant module (or the empty string, in the case of core Moodle settings) and a variable name.</span></p><p class="c3 c13"><span class="c4"></span></p><p class="c3"><span>For example, in the following screenshot, the plugin is </span><span class="c0">logstore_xapi</span><span>, the variable is </span><span class="c0">sendresponsechoices.</span></p><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 602.00px; height: 52.00px;"><img alt="" src="images/image1.png" style="width: 602.00px; height: 52.00px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3 c13"><span class="c4"></span></p><p class="c3"><span>Capabilities are identified by role and capability name, where role refers to a Moodle system user role (e.g., manager or teacher). </span></p><p class="c3 c13"><span class="c4"></span></p><p class="c3"><span>For example, here, the role is &ldquo;</span><span class="c0">Manager</span><span>&rdquo;, &ldquo;</span><span class="c0">Course Creator</span><span>&rdquo;,... the module is &ldquo;</span><span class="c0">moodle</span><span>&rdquo;, the capability is &ldquo;</span><span class="c0">site:viewparticipants</span><span class="c4">&rdquo;.</span></p><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 602.00px; height: 186.67px;"><img alt="" src="images/image2.png" style="width: 602.00px; height: 186.67px; margin-left: 0.00px; margin-top: 0.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3 c13"><span class="c4"></span></p><h5 class="c12" id="h.xakdi6or9gih"><span class="c11 c22">1.1.1.1.2 Headless configuration subsystem</span></h5><p class="c3"><span>Each container contains a script </span><span class="c0">configure.sh</span><span>&nbsp;which reads variables and values from configuration files and applies them to that container&rsquo;s instance of Moodle or MySQL, respectively. Internally, it does so by using templates to build customised scripts containing the actual values and running them. </span></p><h6 class="c34" id="h.yreg90o154pg"><span class="c22 c33">1.1.1.1.2.1 scsv templates &amp; .env files</span></h6><p class="c3"><span>There are two types of configuration value: some used for </span><span class="c28">every</span><span>&nbsp;instance of Up2U deployed using a particular image, and others which vary by deployed instance (e.g., the main instance Moodle URL). </span><span>The Moodle </span><span class="c0">configure.sh</span><span>&nbsp;creates container scripts that change Moodle or Database values. This customises the version of Moodle to our needs.</span></p><p class="c3"><span class="c4">The input to the configuration subsystem comes from a set of &ldquo;.scsv&rdquo; files added to the Docker image at build time. Configuration values written directly into an .scsv file will be used for every instance deployed using an image built with them. Configuration values which vary are represented using variables ($VARIABLE_NAME) in the relevant .scsv file; actual values for these variables are supplied by setting, e.g., VARIABLE_NAME=&lt;value&gt; in the corresponding .env file. These values can then be applied by running the configuration script at runtime. </span></p><p class="c3 c13"><span class="c4"></span></p><p class="c3"><span>The format for .scsv files for variables (in </span><span class="c0">moodle/config</span><sup class="c0"><a href="#ftnt6" id="ftnt_ref6">[6]</a></sup><span class="c0">)</span><span class="c4">is</span></p><p class="c3 c13"><span class="c4"></span></p><p class="c3"><span class="c0">&lsquo;</span><span class="c0">&lt;plugin&gt;&rsquo;; &lsquo;&lt;variable&gt;</span><span class="c5 c0">&rsquo;; &lt;value&gt;</span></p><p class="c3 c13"><span class="c4"></span></p><p class="c3"><span class="c4">For example,</span></p><p class="c3 c13"><span class="c5 c0"></span></p><p class="c3"><span class="c5 c0">&#39;logstore_xapi&#39;;&#39;sendresponsechoices&#39;; 0</span></p><p class="c3 c13"><span class="c5 c0"></span></p><p class="c3"><span>sets the example given above to a value of 0 (false) for </span><span class="c28">every</span><span>&nbsp;instance</span><span>, and</span></p><p class="c3 c13"><span class="c5 c0"></span></p><p class="c3"><span class="c5 c0">&#39;&#39;;&#39;wwwroot&#39;; ${WWWROOT}</span></p><p class="c3 c13"><span class="c4"></span></p><p class="c3"><span>sets </span><span>the value for the Moodle-wide setting &ldquo;</span><span class="c0">wwwroot</span><span>&rdquo; to the value of the variable </span><span class="c5 c0">WWWROOT </span></p><p class="c3"><span>(where the value is taken from </span><span class="c0">moodle.env</span><span>&nbsp;for the currently-running instance</span><span class="c4">).</span></p><p class="c3 c13"><span class="c4"></span></p><p class="c3"><span class="c4">Similarly, the same folder, contains .scsv files for capability settings. The format is:</span></p><p class="c3 c13"><span class="c5 c0"></span></p><p class="c3"><span class="c5 c0">&lsquo;&lt;role&gt;&rsquo;;&rsquo;&lt;capability&gt;&rsquo;;&rsquo;&lt;value&gt;&rsquo;;&lt;contextid&gt;</span></p><p class="c3 c13"><span class="c4"></span></p><p class="c3"><span class="c4">For example</span></p><p class="c3 c13"><span class="c5 c0"></span></p><p class="c3"><span class="c5 c0">&#39;manager&#39;;&#39;enrol/manual:enrol&#39;;&#39;prevent&#39;; 1</span></p><p class="c3 c13"><span class="c4"></span></p><p class="c3"><span>sets</span><span>&nbsp;the capability &lsquo;</span><span class="c0">enrol/manual:enrol</span><span>&rsquo; for users in the &lsquo;</span><span class="c0">manager</span><span>&rsquo; role to &lsquo;</span><span class="c0">prevent</span><span class="c4">&rsquo; for the context with id 1 (which is the entire Moodle system).</span></p><p class="c3 c13"><span class="c4"></span></p><p class="c3"><span class="c4">For example, the Moodle settings .scsv</span></p><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 602.00px; height: 340.00px;"><img alt="" src="images/image3.png" style="width: 602.00px; height: 359.00px; margin-left: 0.00px; margin-top: -19.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3"><span>contains both types of value. For example &ldquo;</span><span class="c0">&#39;logstore_standard&#39;;&#39;logguests&#39;;0</span><span>&rdquo; refers to the Moodle setting &ldquo;</span><span class="c0">logstore_standard | logguest</span><span>&rdquo; and set the value 0, a constant for all instances. &ldquo;&#39;</span><span class="c0">&#39;;&#39;wwwroot&#39;; ${WWWROOT}</span><span>&rdquo; refers to the Moodle setting &ldquo;</span><span class="c0">wwwroot</span><span>&rdquo; as the value the variable &ldquo;</span><span class="c0">WWWROOT</span><span class="c4">&rdquo; has, a value set using the instance variable.</span></p><p class="c3 c13"><span class="c4"></span></p><p class="c3"><span class="c4">An .env file which contains the actual values for variables also informs the system which .scsv files it is paired with. The .scsv files serve as templates with which the script creates temporary intermediate concrete .scsv files containing the actual values for all variables.</span></p><p class="c3 c13"><span class="c4"></span></p><p class="c3"><span>For example, </span><span class="c0">moodle.env </span><span class="c4">containing</span></p><p class="c3 c13"><span class="c4"></span></p><p class="c3"><span class="c0">MOODLE_MOODLE_PHP_CONFIG=&quot;</span><span class="c21">moodle-settings.scsv</span><span class="c0 c5">&quot;</span></p><p class="c3"><span class="c5 c0">&hellip;</span></p><p class="c3"><span>t</span><span class="c4">ells the script that</span></p><p class="c3 c13"><span class="c5 c0"></span></p><p class="c3"><span class="c0">template-</span><span class="c5 c21">moodle-settings.scsv</span></p><p class="c3 c13"><span class="c4"></span></p><p class="c3"><span>contains the settings for moodle (</span><span class="c0">moodle/config</span><span class="c4">&nbsp;folder).</span></p><p class="c3 c13"><span class="c4"></span></p><p class="c3"><span>If </span><span class="c0">capability.env</span><span class="c4">&nbsp;contains</span></p><p class="c3 c13"><span class="c4"></span></p><p class="c3"><span class="c5 c0">PREVENT_ENROLMENT_MOODLE_PHP_CAPABILITY=&quot;moodle-settings.scsv&quot;</span></p><p class="c3 c13"><span class="c4"></span></p><p class="c3"><span>then the script knows that </span><span class="c0">capability-moodle-settings.scsv </span><span>( in the </span><span class="c0">moodle/config</span><span>&nbsp;folder) </span><span class="c4">contains the capability settings.</span></p><p class="c3 c13"><span class="c4"></span></p><p class="c3"><span>The MySQL container provides the</span><span>&nbsp;settings for some of the integrations (</span><span>CERNbox, DSpace, Merlot, ownCloud, SeLCont, SWORD). Specifically, those configured in the MySQL container are those which do not have another easily usable form of programmatic configuration, and which necessitate directly modifying the database in fixed ways. Its configuration values are supplied in .env files in the same manner, and using the same &nbsp;</span><span class="c0">${VARIABLE}</span><span>syntax, but instead of .scsv files, the templates are (custom per-integration) .sql files.</span></p><p class="c3"><span>&nbsp;</span></p><h2 class="c9" id="h.5dklbeqbyxko"><span class="c22 c25">1.2 Infrastructure integrations</span></h2><h3 class="c1" id="h.j5y4c2saicqq"><span class="c14">1.2.1 Single Sign-On</span></h3><p class="c3"><span class="c4">Single sign-on provides access to Up2U tools, whether accessed through an LMS or not. A single id and password enable a user to login to them.</span></p><p class="c3"><span>&nbsp;</span></p><p class="c3"><span>The method for integration with new services is documented at (</span><span class="c18"><a class="c15" href="https://www.google.com/url?q=https://github.com/up2university/single-sign-on/blob/master/services.md&amp;sa=D&amp;ust=1562005404440000">https://github.com/up2university/single-sign-on/blob/master/services.md</a></span><span class="c4">).</span></p><h3 class="c1" id="h.3gaeyiggw04l"><span class="c14">1.2.2 ownCloud-compatible file sync&rsquo;n&rsquo;share</span></h3><p class="c3"><span>Up2U offers support for &ldquo;file sync&rsquo;n&rsquo;share&rdquo; repositories based on the </span><span>ownCloud</span><span class="c4">&nbsp;protocol/standard, for example, repositories provided by instances of the ownCloud, CERNBox, or NextCloud software. In the project production instances, we configure connections to an instance of CERNBox.</span></p><p class="c3 c13"><span class="c4"></span></p><h4 class="c1 c2" id="h.uhcc90riig8o"><span class="c30">1.2.2.1 Configuration</span></h4><p class="c3"><span class="c4">The configuration of this type of repository requires details from the ownCloud instance administrator: the token endpoint, the authorize endpoint, the webdav endpoint, the OCS endpoint, the user info endpoint, the name, the url, the client id, the client secret.</span></p><p class="c3 c13"><span class="c4"></span></p><p class="c3"><span class="c4">For example:</span></p><p class="c3"><span style="overflow: hidden; display: inline-block; margin: 0.00px 0.00px; border: 0.00px solid #000000; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px); width: 602.00px; height: 296.00px;"><img alt="" src="images/image4.png" style="width: 602.00px; height: 316.00px; margin-left: 0.00px; margin-top: -20.00px; transform: rotate(0.00rad) translateZ(0px); -webkit-transform: rotate(0.00rad) translateZ(0px);" title=""></span></p><p class="c3 c13"><span class="c4"></span></p><h4 class="c1 c2" id="h.swivfpao7gvi"><span class="c30">1.2.2.2 Other ownCloud repositories</span></h4><p class="c3 c13"><span class="c4"></span></p><p class="c3"><span>It is possible to add other instances of ownCloud-compatible repositories adding a version of the configuration script with appropriate changes (for example &ldquo;</span><span class="c0">template-cernbox_temp.sql</span><span>&rdquo; from &ldquo;</span><span class="c0">template-cernbox.sql</span><span class="c4">&rdquo; ).</span></p><p class="c3"><span>The script contains several variables that refer to the values from </span><span class="c0">env/cernbox.env</span><span class="c4">.</span></p><p class="c3"><span class="c4">These variable names will need to be altered in the .sql file and corresponding (also renamed).env (to avoid clashes). Then the values from the ownCloud administrator can be added to teh relevant .env file.</span></p><p class="c3 c13"><span class="c4"></span></p><p class="c3"><span class="c4">For example, it is possible to change</span></p><p class="c3 c13"><span class="c4"></span></p><p class="c3"><span class="c5 c0">CERNBOX_MOODLE_SQL_CONFIG=&quot;cernbox.sql&quot;</span></p><p class="c3"><span class="c5 c0">CERNBOX_MOODLE_PHP_CONFIG=&quot;owncloud-settings.scsv&quot;</span></p><p class="c3"><span class="c5 c0">CERNBOX_REPOSITORY_TYPE=&#39;owncloud&#39;</span></p><p class="c3"><span class="c5 c0">CERNBOX_REPO_NAME=&#39;CERNBox&#39;</span></p><p class="c3"><span class="c4">&hellip;</span></p><p class="c3"><span class="c4">To</span></p><p class="c3"><span class="c5 c0">CERNBOX_TEMP_MOODLE_SQL_CONFIG=&quot;cernbox_temp.sql&quot;</span></p><p class="c3"><span class="c5 c0">CERNBOX_TEMP_MOODLE_PHP_CONFIG=&quot;owncloud-settings_temp.scsv&quot;</span></p><p class="c3"><span class="c5 c0">CERNBOX_TEMP_REPOSITORY_TYPE=&#39;owncloud&#39;</span></p><p class="c3"><span class="c0">CERNBOX_TEMP_REPO_NAME=&#39;CERNBox_temp&#39;</span></p><p class="c3"><span>&hellip;</span></p><h3 class="c1" id="h.ua1gvj88a3v0"><span class="c14">1.2.3 eduOER</span></h3><p class="c3"><span>eduOER is a repository for the metadata for Open Educational Resources, allowing OERs from a wide range of sources to be easily discovered and used.</span><span class="c4">&nbsp;</span></p><p class="c3 c13"><span class="c4"></span></p><p class="c3"><span class="c4">A repository is added to eduOER through a metadata aggregator mechanism which aggregates from OAI-PMH targets or RSS feeds. Then, PUMUKIT(eduOER) reads from a REST API and delivers content to users.</span></p><p class="c3 c13"><span class="c4"></span></p><p class="c3"><span>It is a</span><span class="c6">lready integrated in all Up2U LMS platforms. </span><span class="c6">To integrate it with a new LMS</span><span class="c6">&nbsp;would require adaptation of PUMUKIT - as a reference, details of</span><span>&nbsp;its use in Moodle have been published</span><sup><a href="#ftnt7" id="ftnt_ref7">[7]</a></sup><span class="c4">.</span></p><h3 class="c1" id="h.bw8kwbghlu2t"><span class="c14">1.2.4 Learning Record Store (LRS)</span></h3><p class="c3"><span class="c4">A Learning Record Store is a massively scalable database that stores learning activity data for use in learning analytics.</span></p><h4 class="c19" id="h.kez5qro22ma3"><span class="c22 c29">1.2.4.1 Learning Locker </span></h4><p class="c3"><span>The project contains a version of Learning Locker</span><sup><a href="#ftnt8" id="ftnt_ref8">[8]</a></sup><span>&nbsp;(an open-source LRS) built with Docker</span><sup><a href="#ftnt9" id="ftnt_ref9">[9]</a></sup><span>. After building and running the project, the Learning Locker instance needs configuration. This means creating a store</span><sup><a href="#ftnt10" id="ftnt_ref10">[10]</a></sup><span>&nbsp;and adding a client</span><sup><a href="#ftnt11" id="ftnt_ref11">[11]</a></sup><span>. The Moodle Logstore API</span><sup><a href="#ftnt12" id="ftnt_ref12">[12]</a></sup><span class="c4">&nbsp;plugin uses the key and secret of the client.</span></p><p class="c3 c13"><span class="c4"></span></p><p class="c3"><span>The file `</span><span class="c0">moodle/config/template-logstore_xapi-settings.scsv</span><span>` contains the setting for the LRS, and `</span><span class="c0">env/logstore_xapi.env</span><span class="c4">` contains the values of the configuration variables.</span></p><p class="c3 c13"><span class="c4"></span></p><p class="c3"><span class="c4">A list of other possible settings is:</span></p><p class="c3"><span class="c0">LRS_URL=\</span><span class="c18 c0 c24"><a class="c15" href="https://www.google.com/url?q=https://lrs.test.up2university.eu/data/xAPI/&amp;sa=D&amp;ust=1562005404448000">https://lrs.test.up2university.eu/data/xAPI\</a></span></p><p class="c3"><span class="c0">LRS_PASSWORD=\&quot;</span><span class="c0 c28">&hellip;</span><span class="c5 c0">\&quot;</span></p><p class="c3"><span class="c0">LRS_USERNAME=\&quot;</span><span class="c0 c28">&hellip;</span><span class="c0">\&quot;</span></p><h4 class="c19" id="h.jn9i8l3reiou"><span class="c4">To use a different LL instance, or other xAPI LRS, modify the xAPI configuration .env</span></h4><h4 class="c19" id="h.8t8xqipo6hsn"><span class="c6">The xAPI is widely supported by learning management systems, which are likely to require the same configuration details as Moodle. To integrate the production of xAPI activity statements into any other kind of tool, public documentation on the xAPI should be followed.</span></h4><h2 class="c9" id="h.oy2afquo7g0s"><span class="c22 c25">1.3 Tool integrations</span></h2><h3 class="c1" id="h.qnxe4ti32ufo"><span class="c16">1.3.1 </span><span class="c16">LTI tools</span></h3><p class="c3"><span>Learning Tools Interoperability&reg; (LTI&reg;) is a specification maintained by IMS Global</span><sup><a href="#ftnt13" id="ftnt_ref13">[13]</a></sup><span>. It establishes a standard way of integrating rich learning applications, called tool providers with platforms such as learning management systems, called tool consumers.</span><sup><a href="#ftnt14" id="ftnt_ref14">[14]</a></sup></p><p class="c3 c13"><span class="c4"></span></p><p class="c3"><span>LTI tools are configured with a name, URL, and a secret key, salt, and password provided by the administrators of the LTI tool being configured. </span><span>T</span><span>o add a new LTI tool</span><span class="c4">, take the template SQL (from, e.g., selcont.sql in the MySQL image) and modify it to fit the names of the new instance, &amp; provide an updated .env</span></p><p class="c3"><span class="c4">This is the list of variables that need to be changed:</span></p><p class="c3 c13"><span class="c4"></span></p><p class="c3"><span class="c4">LTI</span></p><p class="c3"><span class="c5 c0">&lt;LTI&gt;_URL</span></p><p class="c3"><span class="c5 c0">&lt;LTI&gt;_KEY_URL</span></p><p class="c3"><span class="c5 c0">&lt;LTI&gt;_TOOL_NAME</span></p><p class="c3"><span class="c4">LTI config</span></p><p class="c3"><span class="c5 c0">&lt;LTI&gt;_PASSWORD</span></p><p class="c3"><span class="c5 c0">&lt;LTI&gt;_SERVICE_SALT</span></p><p class="c3"><span class="c5 c0">&lt;LTI&gt;_KEY</span></p><p class="c3 c13"><span class="c4"></span></p><p class="c3"><span class="c4">LTI also has various extensions which could need other values. At the moment, automatic configuration of those extensions is not supported.</span></p><p class="c3 c13"><span class="c4"></span></p><p class="c3"><span>To identify when values for an existing configuration need to be updated, rather than a new LTI tool being added, the value of &lt;LTI&gt;_URL is used as a key; if the database already contains entries with the same value of &lt;LTI&gt;_URL, those entries are updated. Otherwise, entries for a new tool are added.</span></p><h3 class="c1" id="h.pu4cwi4j94bl"><span class="c14">1.3.2 Moodle plugins</span></h3><h4 class="c1 c2" id="h.s55ou6cc6xkc"><span class="c26">1.3.2.1 Moodle container</span></h4><p class="c3"><span>To add a new plugin, we must make sure that the correct version of the plugin is downloaded and its files added to the Moodle installation within the relevant Docker container. One way of doing this is by adding commands to the Dockerfile to perform this installation at build time, for example, t</span><span>he command to add a plugin is similar to the CERNBOX:</span></p><p class="c3"><span class="c5 c0"># Install Plugin to use CERNBox as remote repository</span></p><p class="c3 c13"><span class="c5 c0"></span></p><p class="c3"><span class="c5 c0">RUN cd /var/www/html/repository \</span></p><p class="c3"><span class="c5 c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp; wget https://github.com/cernbox/moodle-repository_owncloud/archive/cb23ba7b5096bd46a9569c69067f1f33a0943020.zip -O owncloud.zip \</span></p><p class="c3"><span class="c5 c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp; unzip owncloud.zip \</span></p><p class="c3"><span class="c5 c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp; rm owncloud.zip \</span></p><p class="c3"><span class="c5 c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp; mv moodle-repository_owncloud* owncloud \</span></p><p class="c3"><span class="c5 c0">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;&amp; chown -R www-data:www-data owncloud</span></p><p class="c3 c13"><span class="c4"></span></p><p class="c3"><span>In essence, within the relevant subdirectory of </span><span class="c0">/var/www/html/</span><span>&nbsp;(the Moodle directory within the image being created), the relevant files should be fetched, unpackaged, renamed appropriately, and permissions given to the </span><span class="c0">www-data </span><span class="c4">user, and temporary files should be cleaned up.</span></p><p class="c3 c13"><span class="c4"></span></p><hr class="c27"><div><p class="c17"><a href="#ftnt_ref1" id="ftnt1">[1]</a><span class="c11">&nbsp;</span><span class="c7"><a class="c15" href="https://www.google.com/url?q=https://up2university.eu&amp;sa=D&amp;ust=1562005404459000">https://up2university.eu</a></span><span class="c10">&nbsp;</span></p></div><div><p class="c17"><a href="#ftnt_ref2" id="ftnt2">[2]</a><span class="c18"><a class="c15" href="https://www.google.com/url?q=https://books.google.co.uk/books?id%3DsC9Le3jIwzIC%26lpg%3DPA507%26dq%3Dmoodle%2Bin%2Bencyclopedia%26pg%3DPA505%26redir_esc%3Dy%26hl%3Den%23v%3Donepage%26q%3Dmoodle%2520in%2520encyclopedia%26f%3Dfalse&amp;sa=D&amp;ust=1562005404454000">https://books.google.co.uk/books?id=sC9Le3jIwzIC&amp;lpg=PA507&amp;dq=moodle+in+encyclopedia&amp;pg=PA505&amp;redir_esc=y&amp;hl=en#v=onepage&amp;q=moodle%20in%20encyclopedia&amp;f=false</a></span></p></div><div><p class="c17"><a href="#ftnt_ref3" id="ftnt3">[3]</a><span class="c11">&nbsp;</span><span class="c7"><a class="c15" href="https://www.google.com/url?q=https://github.com/up2university/docker-moodle&amp;sa=D&amp;ust=1562005404455000">https://github.com/up2university/docker-moodle</a></span></p></div><div><p class="c17"><a href="#ftnt_ref4" id="ftnt4">[4]</a><span class="c11">&nbsp;</span><span class="c7"><a class="c15" href="https://www.google.com/url?q=https://docs.docker.com/compose/compose-file/compose-file-v2/&amp;sa=D&amp;ust=1562005404457000">https://docs.docker.com/compose/compose-file/compose-file-v2/</a></span></p></div><div><p class="c17"><a href="#ftnt_ref5" id="ftnt5">[5]</a><span class="c11">&nbsp;</span><span class="c7"><a class="c15" href="https://www.google.com/url?q=https://docs.moodle.org/dev/Plugin_types&amp;sa=D&amp;ust=1562005404458000">https://docs.moodle.org/dev/Plugin_types</a></span></p></div><div><p class="c17"><a href="#ftnt_ref6" id="ftnt6">[6]</a><span class="c11">&nbsp;</span><span class="c18"><a class="c15" href="https://www.google.com/url?q=https://github.com/up2university/docker-moodle/tree/develop/moodle/config&amp;sa=D&amp;ust=1562005404458000">https://github.com/up2university/docker-moodle/tree/develop/moodle/config</a></span></p></div><div><p class="c17"><a href="#ftnt_ref7" id="ftnt7">[7]</a><span class="c11">&nbsp;</span><span>&nbsp;Please refer to D.3.4 &ldquo;Open Educational Aggregation and Exposure Platform Enhancements&rdquo; Section 4.2..</span></p></div><div><p class="c17"><a href="#ftnt_ref8" id="ftnt8">[8]</a><span class="c11">&nbsp;</span><span class="c18"><a class="c15" href="https://www.google.com/url?q=https://www.ht2labs.com/learning-locker-community/overview/&amp;sa=D&amp;ust=1562005404460000">https://www.ht2labs.com/learning-locker-community/overview/</a></span></p></div><div><p class="c17"><a href="#ftnt_ref9" id="ftnt9">[9]</a><span class="c11">&nbsp;</span><span class="c18"><a class="c15" href="https://www.google.com/url?q=https://github.com/up2university/learninglocker2&amp;sa=D&amp;ust=1562005404456000">https://github.com/up2university/learninglocker2</a></span></p></div><div><p class="c17"><a href="#ftnt_ref10" id="ftnt10">[10]</a><span class="c11">&nbsp;</span><span class="c18"><a class="c15" href="https://www.google.com/url?q=https://ht2ltd.zendesk.com/hc/en-us/articles/115000893009-Managing-your-Learning-Record-Stores%23creating-a-new-store&amp;sa=D&amp;ust=1562005404461000">https://ht2ltd.zendesk.com/hc/en-us/articles/115000893009-Managing-your-Learning-Record-Stores#creating-a-new-store</a></span></p></div><div><p class="c17"><a href="#ftnt_ref11" id="ftnt11">[11]</a><span class="c11">&nbsp;</span><span class="c18"><a class="c15" href="https://www.google.com/url?q=https://www.youtube.com/watch?v%3DKSpT7F9YRKw&amp;sa=D&amp;ust=1562005404461000">https://www.youtube.com/watch?v=KSpT7F9YRKw</a></span></p></div><div><p class="c17"><a href="#ftnt_ref12" id="ftnt12">[12]</a><span class="c11">&nbsp;</span><span class="c18"><a class="c15" href="https://www.google.com/url?q=https://moodle.org/plugins/logstore_xapi&amp;sa=D&amp;ust=1562005404462000">https://moodle.org/plugins/logstore_xapi</a></span></p></div><div><p class="c17"><a href="#ftnt_ref13" id="ftnt13">[13]</a><span class="c11">&nbsp;</span><span class="c7"><a class="c15" href="https://www.google.com/url?q=https://www.imsglobal.org/activity/learning-tools-interoperability&amp;sa=D&amp;ust=1562005404463000">https://www.imsglobal.org/activity/learning-tools-interoperability</a></span><span class="c10">&nbsp;</span></p></div><div><p class="c17"><a href="#ftnt_ref14" id="ftnt14">[14]</a><span class="c11">&nbsp;</span><span class="c7"><a class="c15" href="https://www.google.com/url?q=https://docs.moodle.org/37/en/LTI_and_Moodle&amp;sa=D&amp;ust=1562005404459000">https://docs.moodle.org/37/en/LTI_and_Moodle</a></span></p></div></body></html>